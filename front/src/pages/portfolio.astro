---
import Layout from "layouts/Layout.astro";
import { PortfolioPage } from "pageComponents/PortfolioPage/PortfolioPage";
import { fetchImagesData, fetchSectionData, IImagesData, ILayoutData, type IOtherData } from "shared/const/firebaseVariables";
import { getLangFromUrl } from "shared/lib/i18n/getLangFromUrl";
import { PageWrapper } from "shared/ui/PageWrapper/PageWrapper";
import cave from "widgets/Main/const/dungeon.jpg"

const imagesData = await fetchImagesData() as IImagesData[];
const language = getLangFromUrl(Astro.url)
const layoutData = await fetchSectionData(language, "layout", true) as ILayoutData;
const otherData = await fetchSectionData(language, "other", true) as IOtherData;
const { sectionNames, formData, buttons, filtersData } = otherData;
const { cta } = buttons;
---

<Layout image={cave}>
    <PageWrapper title={layoutData.navlist[1].text} main={layoutData.navlist[0].text}>
        <PortfolioPage client:load 
         formTitle={sectionNames.form}
         placeholdersData={formData}
         button={cta}
         filtersData={filtersData}
         fetchedData={imagesData}
         language={language}
         />
    </PageWrapper>
</Layout>
